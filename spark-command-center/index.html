<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Spark Command Center</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
          },
        }
      }
    }
  </script>
  <style>
    body { font-family: 'Inter', sans-serif; }
    .gradient-border {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      padding: 1px;
      border-radius: 12px;
    }
    .gradient-border-inner {
      background: #0f172a;
      border-radius: 11px;
      height: 100%;
    }
    .glow {
      box-shadow: 0 0 20px rgba(99, 102, 241, 0.3);
    }
    .card-hover:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
    }
    .pulse-dot {
      animation: pulse 2s infinite;
    }
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    .fade-in {
      animation: fadeIn 0.5s ease-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body class="dark bg-slate-950 text-slate-100 min-h-screen">
  <div class="max-w-7xl mx-auto px-4 py-8">
    
    <!-- Header -->
    <header class="mb-8 fade-in">
      <div class="flex items-center justify-between">
        <div>
          <h1 class="text-3xl font-bold bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent">
            ‚ö° Spark Command Center
          </h1>
          <p class="text-slate-400 mt-1" id="lastUpdated">Loading...</p>
        </div>
        <div class="flex items-center gap-4">
          <button onclick="loadData()" class="px-4 py-2 bg-slate-800 hover:bg-slate-700 rounded-lg text-sm font-medium transition-colors">
            ‚Üª Refresh
          </button>
          <div class="flex items-center gap-2 text-sm text-slate-400">
            <span class="w-2 h-2 rounded-full bg-green-500 pulse-dot"></span>
            <span>Live</span>
          </div>
        </div>
      </div>
    </header>

    <!-- Morning Briefing -->
    <section class="mb-8 fade-in" style="animation-delay: 0.1s">
      <div class="gradient-border glow">
        <div class="gradient-border-inner p-6">
          <h2 id="greeting" class="text-2xl font-semibold mb-3">Good morning! ‚òÄÔ∏è</h2>
          <p id="summary" class="text-slate-300 mb-4 leading-relaxed"></p>
          
          <div class="grid md:grid-cols-2 gap-6">
            <div>
              <h3 class="text-sm font-semibold text-indigo-400 uppercase tracking-wider mb-3">‚ú® Highlights</h3>
              <ul id="highlights" class="space-y-2 text-slate-300"></ul>
            </div>
            <div>
              <h3 class="text-sm font-semibold text-purple-400 uppercase tracking-wider mb-3">üéØ Today's Priorities</h3>
              <ul id="priorities" class="space-y-2 text-slate-300"></ul>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Stats Row -->
    <section class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8 fade-in" style="animation-delay: 0.2s">
      <div class="bg-slate-900/50 border border-slate-800 rounded-xl p-4 text-center card-hover transition-all">
        <p class="text-3xl font-bold text-indigo-400" id="statProjects">0</p>
        <p class="text-sm text-slate-400">Active Projects</p>
      </div>
      <div class="bg-slate-900/50 border border-slate-800 rounded-xl p-4 text-center card-hover transition-all">
        <p class="text-3xl font-bold text-amber-400" id="statTasks">0</p>
        <p class="text-sm text-slate-400">Open Tasks</p>
      </div>
      <div class="bg-slate-900/50 border border-slate-800 rounded-xl p-4 text-center card-hover transition-all">
        <p class="text-3xl font-bold text-green-400" id="statDeploys">0</p>
        <p class="text-sm text-slate-400">Deploys Today</p>
      </div>
      <div class="bg-slate-900/50 border border-slate-800 rounded-xl p-4 text-center card-hover transition-all">
        <p class="text-3xl font-bold text-purple-400" id="currentTime">--:--</p>
        <p class="text-sm text-slate-400">Current Time</p>
      </div>
    </section>

    <!-- Main Grid -->
    <div class="grid lg:grid-cols-3 gap-6">
      
      <!-- Projects Column -->
      <section class="lg:col-span-2 fade-in" style="animation-delay: 0.3s">
        <h2 class="text-lg font-semibold mb-4 flex items-center gap-2">
          <span>üìÅ Projects</span>
        </h2>
        <div id="projects" class="space-y-4"></div>
      </section>

      <!-- Right Sidebar -->
      <aside class="space-y-6">
        
        <!-- Quick Links -->
        <section class="fade-in" style="animation-delay: 0.4s">
          <h2 class="text-lg font-semibold mb-4">üîó Quick Links</h2>
          <div id="quickLinks" class="grid grid-cols-2 gap-2"></div>
        </section>

        <!-- Tasks -->
        <section class="fade-in" style="animation-delay: 0.5s">
          <h2 class="text-lg font-semibold mb-4">üìã Tasks</h2>
          <div id="tasks" class="space-y-3"></div>
        </section>

        <!-- Recent Activity -->
        <section class="fade-in" style="animation-delay: 0.6s">
          <h2 class="text-lg font-semibold mb-4">‚è±Ô∏è Recent Activity</h2>
          <div id="recentActivity" class="space-y-3"></div>
        </section>

      </aside>
    </div>

    <!-- Overnight Report (if available) -->
    <section id="overnightSection" class="mt-8 fade-in hidden" style="animation-delay: 0.7s">
      <div class="bg-gradient-to-r from-indigo-900/30 to-purple-900/30 border border-indigo-500/30 rounded-xl p-6">
        <h2 class="text-lg font-semibold mb-4 flex items-center gap-2">
          <span>üí°</span>
          <span id="overnightTitle">Ideas While You Slept</span>
        </h2>
        <div id="overnightThoughts" class="grid md:grid-cols-2 gap-4"></div>
      </div>
    </section>

    <!-- Notes Section -->
    <section class="mt-8 fade-in" style="animation-delay: 0.8s">
      <h2 class="text-lg font-semibold mb-4">üìù Notes & Context</h2>
      <div id="notes" class="grid md:grid-cols-2 gap-4"></div>
    </section>

    <!-- Footer -->
    <footer class="mt-12 pt-6 border-t border-slate-800 text-center text-sm text-slate-500">
      <p>Built with ‚ù§Ô∏è by Claude for Andrew | Spark Studio</p>
      <p class="mt-1">Data file: <code class="text-slate-400">spark-command-center/data.json</code></p>
    </footer>

  </div>

  <script>
    let data = null;

    async function loadData() {
      try {
        const response = await fetch('data.json?t=' + Date.now());
        data = await response.json();
        render();
      } catch (error) {
        console.error('Failed to load data:', error);
        document.getElementById('summary').textContent = 'Failed to load data. Make sure data.json exists.';
      }
    }

    function formatTime(dateStr) {
      const date = new Date(dateStr);
      return date.toLocaleString('en-US', { 
        month: 'short', 
        day: 'numeric',
        hour: 'numeric',
        minute: '2-digit',
        hour12: true 
      });
    }

    function formatRelativeTime(dateStr) {
      const date = new Date(dateStr);
      const now = new Date();
      const diffMs = now - date;
      const diffMins = Math.floor(diffMs / 60000);
      const diffHours = Math.floor(diffMs / 3600000);
      
      if (diffMins < 60) return `${diffMins}m ago`;
      if (diffHours < 24) return `${diffHours}h ago`;
      return formatTime(dateStr);
    }

    function getPriorityColor(priority) {
      switch(priority) {
        case 'high': return 'text-red-400 bg-red-400/10 border-red-400/30';
        case 'medium': return 'text-amber-400 bg-amber-400/10 border-amber-400/30';
        case 'low': return 'text-green-400 bg-green-400/10 border-green-400/30';
        default: return 'text-slate-400 bg-slate-400/10 border-slate-400/30';
      }
    }

    function getStatusBadge(status) {
      const styles = {
        'active': 'bg-green-500/20 text-green-400 border-green-500/30',
        'in-progress': 'bg-blue-500/20 text-blue-400 border-blue-500/30',
        'pending': 'bg-amber-500/20 text-amber-400 border-amber-500/30',
        'planning': 'bg-purple-500/20 text-purple-400 border-purple-500/30',
        'ongoing': 'bg-indigo-500/20 text-indigo-400 border-indigo-500/30'
      };
      return styles[status] || 'bg-slate-500/20 text-slate-400 border-slate-500/30';
    }

    function render() {
      if (!data) return;

      // Last updated
      document.getElementById('lastUpdated').textContent = 
        `Last updated: ${formatTime(data.lastUpdated)} by ${data.updatedBy}`;

      // Briefing
      document.getElementById('greeting').textContent = data.briefing.greeting;
      document.getElementById('summary').textContent = data.briefing.summary;
      
      document.getElementById('highlights').innerHTML = data.briefing.highlights
        .map(h => `<li class="flex items-start gap-2"><span class="text-indigo-400">‚Ä¢</span>${h}</li>`)
        .join('');
      
      document.getElementById('priorities').innerHTML = data.briefing.priorities
        .map((p, i) => `<li class="flex items-start gap-2"><span class="text-purple-400 font-semibold">${i + 1}.</span>${p}</li>`)
        .join('');

      // Stats
      document.getElementById('statProjects').textContent = data.stats.projectsActive;
      document.getElementById('statTasks').textContent = data.stats.tasksOpen;
      document.getElementById('statDeploys').textContent = data.stats.deploysToday;

      // Projects
      document.getElementById('projects').innerHTML = data.projects.map(project => `
        <div class="bg-slate-900/50 border border-slate-800 rounded-xl p-5 card-hover transition-all">
          <div class="flex items-start justify-between mb-3">
            <div>
              <h3 class="font-semibold text-lg flex items-center gap-2">
                <span class="w-3 h-3 rounded-full" style="background: ${project.color}"></span>
                ${project.name}
              </h3>
              <p class="text-sm text-slate-400 mt-1">${project.description}</p>
            </div>
            <span class="px-2 py-1 text-xs font-medium rounded-full border ${getStatusBadge(project.status)}">
              ${project.status}
            </span>
          </div>
          ${project.mrr ? `<p class="text-sm"><span class="text-slate-500">MRR:</span> <span class="text-green-400 font-semibold">${project.mrr}</span></p>` : ''}
          ${project.client ? `<p class="text-sm"><span class="text-slate-500">Client:</span> ${project.client}</p>` : ''}
          ${project.lead ? `<p class="text-sm"><span class="text-slate-500">Lead:</span> ${project.lead}</p>` : ''}
          <p class="text-sm mt-2"><span class="text-slate-500">Last:</span> ${project.lastActivity}</p>
          ${project.nextSteps ? `<p class="text-sm text-indigo-400 mt-1">‚Üí ${project.nextSteps}</p>` : ''}
          ${project.goal ? `<p class="text-sm text-purple-400 mt-1">üéØ ${project.goal}</p>` : ''}
        </div>
      `).join('');

      // Quick Links
      document.getElementById('quickLinks').innerHTML = data.quickLinks.map(link => `
        <a href="${link.url}" target="_blank" 
           class="flex items-center gap-2 px-3 py-2 bg-slate-900/50 border border-slate-800 rounded-lg hover:bg-slate-800 hover:border-slate-700 transition-all text-sm">
          <span>${link.icon}</span>
          <span>${link.name}</span>
        </a>
      `).join('');

      // Tasks
      document.getElementById('tasks').innerHTML = data.tasks.map(task => `
        <div class="bg-slate-900/50 border border-slate-800 rounded-lg p-3">
          <div class="flex items-start justify-between gap-2">
            <p class="text-sm font-medium">${task.title}</p>
            <span class="px-1.5 py-0.5 text-xs rounded border ${getPriorityColor(task.priority)}">${task.priority}</span>
          </div>
          <div class="flex items-center gap-2 mt-2 text-xs text-slate-500">
            <span class="px-1.5 py-0.5 rounded border ${getStatusBadge(task.status)}">${task.status}</span>
            ${task.dueDate ? `<span>Due: ${task.dueDate}</span>` : ''}
          </div>
        </div>
      `).join('');

      // Recent Activity
      document.getElementById('recentActivity').innerHTML = data.recentActivity.slice(0, 5).map(activity => `
        <div class="flex items-start gap-3 text-sm">
          <span class="text-slate-500 whitespace-nowrap">${formatRelativeTime(activity.timestamp)}</span>
          <p class="text-slate-300">${activity.description}</p>
        </div>
      `).join('');

      // Notes
      document.getElementById('notes').innerHTML = data.notes.map(note => `
        <div class="bg-slate-900/50 border border-slate-800 rounded-xl p-4">
          <div class="flex items-center justify-between mb-2">
            <h3 class="font-medium">${note.title}</h3>
            <span class="text-xs px-2 py-0.5 bg-slate-800 rounded-full text-slate-400">${note.category}</span>
          </div>
          <p class="text-sm text-slate-400">${note.content}</p>
        </div>
      `).join('');

      // Overnight Report (if exists)
      if (data.overnightReport && data.overnightReport.thoughts && data.overnightReport.thoughts.length > 0) {
        document.getElementById('overnightSection').classList.remove('hidden');
        document.getElementById('overnightTitle').textContent = data.overnightReport.title;
        document.getElementById('overnightThoughts').innerHTML = data.overnightReport.thoughts.map(thought => `
          <div class="bg-slate-900/50 border border-slate-700 rounded-lg p-4">
            <div class="flex items-center gap-2 mb-2">
              <span class="px-2 py-0.5 text-xs bg-indigo-500/20 text-indigo-300 rounded-full">${thought.category}</span>
            </div>
            <h3 class="font-medium text-white mb-1">${thought.idea}</h3>
            <p class="text-sm text-slate-400">${thought.details}</p>
          </div>
        `).join('');
      } else {
        document.getElementById('overnightSection').classList.add('hidden');
      }
    }

    // Update time every second
    function updateTime() {
      const now = new Date();
      document.getElementById('currentTime').textContent = now.toLocaleTimeString('en-US', {
        hour: 'numeric',
        minute: '2-digit',
        hour12: true
      });
    }

    // Initialize
    loadData();
    updateTime();
    setInterval(updateTime, 1000);
    
    // Auto-refresh every 5 minutes
    setInterval(loadData, 300000);
  </script>
</body>
</html>
